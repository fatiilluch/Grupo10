import Personaje.*
import HechizoDeLogo.*
import ArmasFilosas.*
import collarDivino.*
import espejo.*
import bendicion.*
import ArmaduraGeneral.*
import CotaMalla.*
import hechizo.*
import armadura.*
import libroDeHechizos.*
import Mascara.*

describe "Tests Punto 3 de la Entrega 2" {

	var rolando
	var espadaDelDestino
	var mascaraOscura
	var armaduraPunto3
	var armadura2
	var espectroMalefico
	var cotaDeMalla
	var cotaDeMalla2
	
	fixture 
	{
		armaduraPunto3 = new ArmaduraGeneral(refuerzo = ninguno, peso = 0, fechaCompra = new Date())
		mascaraOscura = new MascaraOscura(peso = 0, fechaCompra =  new Date())
		espadaDelDestino = new ArmaFilosa(peso = 0, fechaCompra =  new Date())
		espectroMalefico = new HechizoDeLogo(nombre = "espectro malefico", multiplicador = 1) 
		rolando = new Personaje(hechizoPreferido = espectroMalefico, capacidadMaximaDeCarga = 200)
		rolando.agregaArtefacto(armaduraPunto3)
		rolando.agregaArtefacto(mascaraOscura)
		rolando.agregaArtefacto(espadaDelDestino)
		rolando.agregaArtefacto(collarDivino)
		rolando.agregaArtefacto(espejo)
	}
	test "Rolando esta cargado" 
	{
		assert.that(rolando.estaCargado())
	}
	
	test "Si Rolando se saca la armadura, no esta cargado"
	{
		rolando.removeArtefacto(armaduraPunto3)
		assert.notThat(rolando.estaCargado())
	}
	
	test "La habilidad de Lucha de Rolando es 20"
	{
		assert.equals(rolando.habilidadDeLucha(),20)
	}
	
	test "La habilidad de lucha de la armadura de Rolando si tiene una bendición de refuerzo es 58"
	{
		rolando.removeArtefacto(armaduraPunto3)
		armaduraPunto3.cambiaRefuerzo(bendicion)
		assert.equals(armaduraPunto3.poderDeLucha(rolando),58)
	}

	test "La habilidad para la lucha de la armadura de Rolando si tiene una cota de malla de refuerzo es 3"
	{
	    cotaDeMalla = new CotaMalla(poder = 1)
		rolando.removeArtefacto(armaduraPunto3)
		armaduraPunto3.cambiaRefuerzo(cotaDeMalla)
		assert.equals(armaduraPunto3.poderDeLucha(rolando),3)
		
	}

	test "La habilidad para la lucha de la armadura de Rolando si tiene el hechizo básico de refuerzo es 12"
	{
		rolando.removeArtefacto(armaduraPunto3)
		armaduraPunto3.cambiaRefuerzo(hechizo)
		assert.equals(armaduraPunto3.poderDeLucha(rolando),12)
	}
	
	test "La habilidad para la lucha de la armadura de Rolando, si tiene el hechizo espectro maléfico de refuerzo es 19"
	{
		rolando.removeArtefacto(armaduraPunto3)
		armaduraPunto3.cambiaRefuerzo(espectroMalefico)
		assert.equals(armaduraPunto3.poderDeLucha(rolando),19)
	}

	test "Si eliminamos todos los artefactos de Rolando, incorporamos el espejo, la habilidad de lucha de Rolando es 1"
	{
		rolando.removeTodosLosArtefactos()
		rolando.agregaArtefacto(espejo)
		assert.equals(rolando.habilidadDeLucha(),1)	
	}
	
	test "Si reemplazamos el hechizo preferido por un libro de hechizos que contenga el Hechizo de Logos, el nivel de hechiceria de Rolando es 56"
	{
		libroDeHechizos.agregaHechizo(espectroMalefico)
		rolando.hechizoPreferido(libroDeHechizos)
		assert.equals(rolando.nivelDeHechiceria(),56)
	}

	test "Si le agregamos a Rolando otra armadura (cuyo valor base es 5 y refuerzo cota de malla que tiene un valor de lucha 6), la habilidad para la lucha de Rolando es 37"
	{
		cotaDeMalla2 = new CotaMalla(poder = 6)
		armadura2 = new ArmaduraGeneral(refuerzo = cotaDeMalla2, valorBase = 5, peso = 0, fechaCompra =  new Date())
		rolando.agregaArtefacto(armadura2)
		assert.equals(rolando.habilidadDeLucha(),37)
	} 
	
		
/* Agregarle a Rolando una armadura extra, cuyo valor base es 5, con un refuerzo cota de 
malla que tiene un valor de lucha 6.
Saber cuál es la habilidad para la lucha de Rolando.
37 = 13 (valor de lucha de Rolando + la espada, el collar y la máscara) + 
2 de la armadura sin refuerzo + 11 de la armadura nueva 
(5 valor base + 6 del refuerzo) + 11 por el espejo que replica el 
artefacto que más valor para la lucha le da, que pasa a ser la nueva armadura. 
*/		
		
}

